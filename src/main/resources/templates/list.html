<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>首页_杨青个人博客 - 一个站在web前端设计之路的女技术员个人博客网站</title>
<meta name="keywords" content="个人博客,杨青个人博客,个人博客模板,杨青" />
<meta name="description" content="杨青个人博客，是一个站在web前端设计之路的女程序员个人网站，提供个人博客模板免费资源下载的个人原创网站。" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="css/base.css" rel="stylesheet">
<link href="css/index.css" rel="stylesheet">
<link href="css/m.css" rel="stylesheet">
<script src="js/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript" src="js/hc-sticky.js"></script>
<script type="text/javascript" src="js/comm.js"></script>
<!--[if lt IE 9]>
<script src="js/modernizr.js"></script>
<![endif]-->
  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
  <script src="http://how2j.cn/study/axios.min.js"></script>
    <!--加载不显示大括号{{}}-->
    <style type="text/css">
        [v-cloak] { display: none }
    </style>
</head>
<body>
<header class="header-navigation" id="header">
  <nav><div class="logo"><a href="/">杨青个人博客</a></div>
    <h2 id="mnavh"><span class="navicon"></span></h2>
    <ul id="starlist">
      <li><a href="/index">网站首页</a></li>
      <li><a href="/share">我的相册</a></li>
      <li><a href="/list">我的日记</a></li>
      <li><a href="/about">关于我</a></li>
      <li><a href="/gbook">留言</a></li>
      <li><a href="/info">内容页</a></li>
      <li><a href="/infopic">内容页</a></li>
      <li><a href="/edit">发表日记</a></li>
    </ul>
</nav>
</header>
<article  id="demo">
  <aside class="l_box">
 <div class="search">
      <!--<form action="javascript:" method="post" name="searchform" id="searchform">-->
      <form @submit.prevent="search">
        <input name="keyboard" id="keyboard" class="input_text" value="请输入关键字词" style="color: rgb(153, 153, 153);" onfocus="if(value=='请输入关键字词'){this.style.color='#000';value=''}" onblur="if(value==''){this.style.color='#999';value='请输入关键字词'}" type="text">
        <input name="show" value="title" type="hidden">
        <input name="tempid" value="1" type="hidden">
        <input name="tbname" value="news" type="hidden">
        <input name="Submit" class="input_submit" value="搜索" type="submit">
          <!--<a name="Submit" class="input_submit" href="javascript:" type="submit" @click="search">搜索</a>-->
      </form>
    </div>
    <div class="fenlei">
      <h2>文章分类</h2>
      <ul>
        <li><a href="/">学无止境（33）</a></li>
        <li><a href="/">日记（19）</a></li>
        <li><a href="/">慢生活（520）</a></li>
        <li><a href="/">美文欣赏（40）</a></li>
      </ul>
    </div>
    <div class="tuijian">
      <h2>站长推荐</h2>
      <ul>
        <li><a href="/">你是什么人便会遇上什么人</a></li>
        <li><a href="/">帝国cms 列表页调用子栏目，没有则不显示栏目名称</a></li>
        <li><a href="/">第二届 优秀个人博客模板比赛参选活动</a></li>
        <li><a href="/">个人博客模板《绅士》后台管理</a></li>
        <li><a href="/">你是什么人便会遇上什么人</a></li>
        <li><a href="/">帝国cms 列表页调用子栏目，没有则不显示栏目名称</a></li>
        <li><a href="/">第二届 优秀个人博客模板比赛参选活动</a></li>
        <li><a href="/">个人博客模板《绅士》后台管理</a></li>
      </ul>
    </div>
     <div class="tuijian">
      <h2>点击排行</h2>
      <!--<ul>-->
        <!--<li><a href="/">你是什么人便会遇上什么人</a></li>-->
        <!--<li><a href="/">帝国cms 列表页调用子栏目，没有则不显示栏目名称</a></li>-->
        <!--<li><a href="/">第二届 优秀个人博客模板比赛参选活动</a></li>-->
        <!--<li><a href="/">个人博客模板《绅士》后台管理</a></li>-->
        <!--<li><a href="/">你是什么人便会遇上什么人</a></li>-->
        <!--<li><a href="/">帝国cms 列表页调用子栏目，没有则不显示栏目名称</a></li>-->
        <!--<li><a href="/">第二届 优秀个人博客模板比赛参选活动</a></li>-->
        <!--<li><a href="/">个人博客模板《绅士》后台管理</a></li>-->
      <!--</ul>-->
         <ul v-for="(blog,index) in sortedBlogs" v-cloak>
             <li><font color="red" size="1">({{blog.readnum}})</font><a :href="'info?id='+blog.id" :title="blog.title">{{index+1}}.{{blog.title}}</a></li>
         </ul>
    </div>
<div class="cloud">
      <h2>标签云</h2>
      <ul>
        <a href="/">陌上花开</a> <a href="/">校园生活</a> <a href="/">html5</a> <a href="/">SumSung</a> <a href="/">青春</a> <a href="/">温暖</a> <a href="/">阳光</a> <a href="/">三星</a><a href="/">索尼</a> <a href="/">华维荣耀</a> <a href="/">三星</a> <a href="/">索尼</a>
      </ul>
    </div>
    <div class="guanzhu">
      <h2>关注我 么么哒</h2>
      <ul>
        <img src="images/wx.jpg">
      </ul>
    </div>
  </aside>
  <main class="r_box" v-cloak>
    <li v-for="blog in blogs" class="pp"><i><a :href="'info?id='+blog.id"><img src="images/1.jpg"></a></i>
      <h3><a :href="['info?id='+blog.id]">{{blog.title}}</a></h3>
      <p>{{blog.content}}</p>
    </li>
    <!--<div class="pagelist"><a class="allpage"><b>99</b></a>&nbsp;&nbsp;<a href="#" class="curPage">1</a>&nbsp;&nbsp;<a href="#" onclick="page(2)">2</a>&nbsp;&nbsp;<a href="#" onclick="page(3)">3</a>&nbsp;&nbsp;<a href="#" onclick="page(4)">4</a>&nbsp;&nbsp;<a href="#" onclick="page(5)">5</a>&nbsp;&nbsp;<a href="#" onclick="page(6)">6</a>&nbsp;&nbsp;<a href="#" onclick="page(7)">7</a>&nbsp;&nbsp;<a href="#" onclick="page(8)">8</a>&nbsp;&nbsp;<a href="#" onclick="page(9)">9</a>&nbsp;&nbsp;<a href="#" onclick="page(2)">下一页</a></div>-->
    <div class="pagelist"><a href="javascript:" @click="goTo" v-for="page in pageInfo.pages">{{page}}</a></div>
  </main>
</article>
<footer>
  <p>Design by <a href="http://www.yangqq.com" target="_blank">杨青个人博客</a> <a href="/">蜀ICP备11002373号-1</a></p>
</footer>
<a href="#" class="cd-top">Top</a>
</body>
<script>
    new Vue({
        el:"#demo",
        data:{
            pageInfo:[],
            blogs:[],
            sortedBlogs:[]
        },
        created:function () {
            var self = this;
            $.ajaxSettings.async = false;//设置后则为同步执行(即执行完ajax才执行后续代码)
            $.get(
                "getBlogPageInfo",
                {start: GetQueryString("start"?"start":0)},
                function (data) {
                    self.pageInfo = data;
                    self.blogs = data["list"];
                }
            )
            $.get(
                "sortBlogs",
                function (data) {
                    self.sortedBlogs = data;
                }
            )
//            $('#content').html(this.Blog.content);//使用这个可以将文本以html输出
        },
        methods:{
            goTo:function (event) {//页数跳转
//                获取当前标签的文本值
                var text = event.target.innerHTML;
                console.log("点击事件(页数为):"+text);
                window.location.href="list?start="+text;
            },
            search:function () {
                var self = this;
//                console.log("搜索");
//                console.log($('#keyboard').val());
                /*
                缺：查询到的结果分页，关键词高亮
                 */
                $.get(
                    "searchBlog",
                    {keyword:$('#keyboard').val(),start: GetQueryString("start"?"start":0)},
                    function (data) {
//                        self.blogs = data;
                        self.pageInfo = data;
                        self.blogs = data["list"];
//                      在搜索列表第一个上面加上提示信息(搜索结果),不直接在父级容器加(对不齐)
                        $(".pp:first").before("<font>搜索结果("+$('#keyboard').val()+"):</font>")
                    }
                )
            }
        }
    });
    function GetQueryString(name) {//获取url中key为name的value
        var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
        var r = window.location.search.substr(1).match(reg);
        if (r != null) return unescape(r[2]);
        return null;
    }
</script>
</html>
